<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:http="http://www.mulesource.org/schema/mule/http/2.2"
    xmlns:https="http://www.mulesource.org/schema/mule/https/2.2"
    xmlns:vm="http://www.mulesource.org/schema/mule/vm/2.2"
    xmlns:salesforce="http://www.mulesource.org/schema/mule/salesforce/2.2"
    xsi:schemaLocation="
          http://www.mulesource.org/schema/mule/http/2.2 http://www.mulesource.org/schema/mule/http/2.2/mule-http.xsd
          http://www.mulesource.org/schema/mule/https/2.2 http://www.mulesource.org/schema/mule/https/2.2/mule-https.xsd
          http://www.mulesource.org/schema/mule/core/2.2 http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
          http://www.mulesource.org/schema/mule/vm/2.2 http://www.mulesource.org/schema/mule/vm/2.2/mule-vm.xsd
          http://www.mulesource.org/schema/mule/salesforce/2.2 http://www.mulesource.org/schema/mule/salesforce/2.2/mule-salesforce.xsd">

    <custom-transformer name="StreamToUserInput"
        class="org.mule.transport.salesforce.transformers.StreamToUserInput" />
    <custom-transformer name="SObjectsToHtml"
        class="org.mule.transport.salesforce.transformers.SObjectsToHtml" />

    <message-properties-transformer name="addContentType">
        <add-message-property key="Content-Type"
            value="text/html" />
    </message-properties-transformer>

    <model name="salesforceHttpExample">
        <service name="LoginQueryService">
            <inbound>
                <inbound-endpoint address="http://localhost:8081/getcontacts"
                    transformer-refs="StreamToUserInput"
                    responseTransformer-refs="SObjectsToHtml addContentType"
                    synchronous="true" />
            </inbound>
            <outbound>
                <pass-through-router>
                    <outbound-endpoint
                        address="salesforce://login(g1,g2);*query(g3,r1);"
                        synchronous="true" />
                </pass-through-router>
            </outbound>

        </service>

    </model>



</mule>
